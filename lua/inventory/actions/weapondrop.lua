local self = CInventory.Actions:CreateAction ("WeaponDrop")function self:CanRun (ply, inventory, item)	return inventory:GetOwnerEntity () and true or falseendfunction self:Run (ply, inventory, item)	local tr = inventory:GetOwnerEntity ():GetEyeTrace ()	if not tr.Hit then		return	end	local dist = (tr.HitPos - tr.StartPos):Length ()	local pos = tr.HitPos	if dist > 80 then		pos = tr.StartPos + 80 * (tr.HitPos - tr.StartPos):GetNormalized ()	end	local ent = ents.Create ("spawned_weapon")	ent.weaponclass = item:GetEntityClass ()	if item:GetModel ():sub (1, 6):lower () == "models" then		ent:SetModel (item:GetModel ())	end	ent:SetPos (pos)	ent:Spawn ()	ent:Activate ()	ent:TryCall ("OnInventorySpawned", "drop")		if ent.CPPISetOwner then		ent:CPPISetOwner (inventory:GetOwnerEntity ())	end	if ent.dt then		ent.dt.owning_ent = inventory:GetOwnerEntity ()	end		if item:GetCount () > 1 then		item:RemoveCount (1)	else		inventory:RemoveItem (item)	endend